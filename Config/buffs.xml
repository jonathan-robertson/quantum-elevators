<config>
    <append xpath="/buffs">

        <!-- icon="ui_game_symbol_enemy_dot" -->
        <buff name="triggerQuantumElevator" hidden="true">
            <duration value=".1" />
            <update_rate value=".1" />
            <!-- duration: append the duration -->
            <!-- effect: stack up the effect -->
            <!-- replace: reset the duration -->
            <!-- ignore: 2nd buff bounces -->
            <stack_type value="ignore" />
            <effect_group>
                <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="inQuantumElevator" />
            </effect_group>
        </buff>

        <buff name="inQuantumElevator" hidden="true">
            <duration value=".2" />
            <stack_type value="replace" />
            <effect_group>
                <!-- parent_transform="Spine1" local_offset="0,-.2,0" -->
                <!--  shape_mesh="true" -->
                <!-- parent_transform="LOD0" -->
                <!-- <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="RadiatedParticlesOnMesh" parent_transform="LOD0" shape_mesh="true" />
                <triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffFinish" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" /> -->

                <!-- <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_on" /> -->
                <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_idle" />
                <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="solarpanel_idle" />
                <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="solarpanel_idle" />

                <!-- TODO: add journal entry here? -->
            </effect_group>
        </buff>

        <buff name="notifyQuantumElevatorLocked">
            <duration value="5.5" />
            <stack_type value="ignore" />
            <effect_group>
                <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="notifyQuantumElevatorLockedTooltip" sound="locked" />
            </effect_group>
        </buff>

        <buff name="notifyQuantumElevatorLockedWithPassword">
            <duration value="5.5" />
            <stack_type value="ignore" />
            <effect_group>
                <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="notifyQuantumElevatorLockedWithPasswordTooltip" sound="locked" />
            </effect_group>
        </buff>

        <buff name="triggerQuantumJump">
            <duration value="2" />
            <stack_type value="replace" />
            <update_rate value=".1" />
            <effect_group>
                <!-- <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="breakleg" />
                <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="breakleg" />

                <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="p_onFire" shape_mesh="true" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_onFire" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="p_onFire" /> -->

                <!-- parent_transform="Spine1" local_offset="0,-.2,0" -->
                <!-- shape_mesh="true" -->
                <!-- <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="p_electric_shock" parent_transform="Spine1" local_offset="0,-.2,0" />
                <triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="p_electric_shock" />
                <triggered_effect trigger="onSelfBuffFinish" action="RemoveParticleEffectFromEntity" particle="p_electric_shock" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_electric_shock" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="p_electric_shock" /> -->

                <!-- local_offset="0,-.2,0" -->
                <!-- shape_mesh="true" -->
                <!-- AttachParticleEffectToEntity		target, particle, parent_transform, local_offset, local_rotation -->


                <!-- 
	AnimatorSetFloat:		target, property, value
	AnimatorSetInt:		target, property, value ; change the animation / walk type
	AnimatorSetBool:		target, property, value

	ModifyScreenEffect:		target, effect_name, intensity, fade;   intensity=0 disables it
        Shaders are in \Assets\Resources\ScreenEffects\Shaders

    PlaySound:			target, sound, play_in_head;   sound references not a file name but a sound name from sounds.xml
    sound can use wildcards. "#" is replaced by "1" (male) or "2" (female), "$" is replaced by "Male" or "female"
        example: sound="player#painlg"
    StopSound:			target, sound, play_in_head
    FadeOutSound:			target, sound
    ShakeCamera			shake_speed,shake_amplitude,shake_time?
                -->


                <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_on" play_in_head="false" />
                <triggered_effect trigger="onSelfBuffStack" action="PlaySound" sound="solarpanel_on" play_in_head="false" />

                <triggered_effect local_rotation="90,0,0" trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="RadiatedParticlesOnMesh" parent_transform="LOD0" shape_mesh="true" />
                <triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffFinish" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />

                <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="triggerQuantumJump">
                    <requirement name="!HasBuff" buff="inQuantumElevator" />
                </triggered_effect>

                <!-- <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="p_big_smoke" parent_transform="Spine1" local_offset="0,-.2,0" />
                <triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="p_big_smoke" />
                <triggered_effect trigger="onSelfBuffFinish" action="RemoveParticleEffectFromEntity" particle="p_big_smoke" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="p_big_smoke" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="p_big_smoke" /> -->

                <!-- <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="solarpanel_on" />
                <triggered_effect trigger="onSelfBuffRemove" action="StopSound" sound="solarpanel_on" /> -->

                <!-- <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_on" />
                <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_idle" />
                <triggered_effect trigger="onSelfBuffRemove" action="PlaySound" sound="solarpanel_off" />
                <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="solarpanel_idle" />
                <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="solarpanel_idle" /> -->

                <!-- <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="electric_fence_impact" />
                <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="electric_fence_impact" />
                <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="electric_fence_impact" /> -->

                <!--                 
                <SoundDataNode name="solarpanel_on"> <AudioSource name="Sounds/AudioSource_Interact"/>
                    <Noise ID="1" noise="7" time="3" muffled_when_crouched="0.5"/>
                    <AudioClip ClipName="Sounds/Electricity/SolarPanel/solarpanel_on"/>
                    <LocalCrouchVolumeScale value="1.0"/> <CrouchNoiseScale value="0.5"/> <NoiseScale value="1"/> <MaxVoices value="10"/> <MaxRepeatRate value="0.01"/> </SoundDataNode>
                
                <SoundDataNode name="solarpanel_idle"> <AudioSource name="Sounds/AudioSource_Interact"/>
                    <AudioClip ClipName="Sounds/Electricity/SolarPanel/solarpanel_idle_lp" Loop="true"/>
                    <LocalCrouchVolumeScale value="1.0"/> <CrouchNoiseScale value="0.5"/> <NoiseScale value="1"/> <MaxVoices value="18"/> <MaxRepeatRate value="0.001"/> </SoundDataNode>
                
                <SoundDataNode name="solarpanel_off"> <AudioSource name="Sounds/AudioSource_Interact"/>
                    <Noise ID="1" noise="7" time="3" muffled_when_crouched="0.5"/>
                    <AudioClip ClipName="Sounds/Electricity/SolarPanel/solarpanel_off"/>
                    <LocalCrouchVolumeScale value="1.0"/> <CrouchNoiseScale value="0.5"/> <NoiseScale value="1"/> <MaxVoices value="10"/> <MaxRepeatRate value="0.01"/> </SoundDataNode>
                 -->
            </effect_group>
        </buff>

        <buff name="test1">
            <duration value="10" />
            <effect_group>
                <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="RadiatedParticlesOnMesh" parent_transform="LOD0" shape_mesh="true" />
                <triggered_effect trigger="onSelfDied" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffFinish" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfBuffRemove" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
                <triggered_effect trigger="onSelfLeaveGame" action="RemoveParticleEffectFromEntity" particle="RadiatedParticlesOnMesh" />
            </effect_group>
        </buff>

        <!-- <buff name="quantumCooldown" hidden="true">
            <duration value="1" />
        </buff> -->

        <!-- hidden="true" ? -->
        <!-- <buff name="triggerQuantumJumpxxxxx" icon="ui_game_symbol_block_repair" icon_color="0,127,255">
            <duration value="0" />
            <stack_type value="ignore" />
            <effect_group name="activation">
                <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="triggerQuantumDrop" />
            </effect_group>
            <effect_group name="internal-cleanup">
                <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="quantumJumpRequested" operation="set" value="0" />
            </effect_group>
        </buff>

        <buff name="triggerQuantumJumpxxxxx" icon="ui_game_symbol_block_repair" icon_color="0,127,255">
            <duration value="0" />
            <stack_type value="ignore" />
            <effect_group name="activation">
                <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="triggerQuantumDrop" />
            </effect_group>
            <effect_group name="cleanup-trigger">
                <requirements compare_type="or">
                    <requirement name="CVarCompare" cvar="_jumping" operation="Equals" value="0" />
                </requirements>
                <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="triggerQuantumJump" />
            </effect_group>
        </buff>

        <buff name="triggerQuantumDropxxxxx" icon="ui_game_symbol_block_damage" icon_color="0,127,255">
            <duration value="0" />
            <stack_type value="ignore" />
            <effect_group name="activation">
                <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="triggerQuantumJump" />
            </effect_group>
            <effect_group name="cleanup-trigger">
                <requirements compare_type="or">
                    <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0" />
                </requirements>
                <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="triggerQuantumDrop" />
            </effect_group>
        </buff> -->
    </append>
</config>